//*****************************************************************************
//*****************************************************************************
//
// SISTEMA DE CONSTRUCAO 
//
//	UsMarine (vinicius.arroyo at gmail.com)
//
//*****************************************************************************
//*****************************************************************************

//TODO:

//TAGS usadas:

//*****************************************************************************
//*****************************************************************************
// FUNCTIONs
//*****************************************************************************
//*****************************************************************************

//*****************************************************************************
// cm - Construction Mode
//*****************************************************************************
[FUNCTION cm]
if ( 0<argn> > 0 )
	EVENTS +e_construct
	sysmessage Evento de construcao ativado
else
	EVENTS -e_construct
	sysmessage Evento de construcao desativado
endif

//*****************************************************************************
// cp( target_step, item ) - Copia um item e permite escolher o destino
//*****************************************************************************
//argo - alvo do target
[FUNCTION cp]
if ( 0<argv[0]> == 2 )
	OBJ=<argv[1]>
	SERV.NEWITEM <OBJ.baseid>
	NEW.p = <TARGP> 
	NEW.attr = <OBJ.attr>
	NEW.dispid = <OBJ.dispid>
elif ( 0<argv[0]> )
	sysmessage Selecione o destino para <argo.baseid>
	targetfg cp 2,<argo>
else
	sysmessage Selecione o item a copiar
	targetf cp 1
endif

//*****************************************************************************
// cpz( target_step, item ) - Copia um item e permite escolher o destino com mesmo z
//*****************************************************************************
//argo - alvo do target
[FUNCTION cpz]
if ( 0<argv[0]> == 2 )
	OBJ=<argv[1]>
	SERV.NEWITEM <OBJ.baseid>
	NEW.p = <TARGP> 
	NEW.attr = <OBJ.attr>
	NEW.dispid = <OBJ.dispid>
	NEW.z = <OBJ.z>
elif ( 0<argv[0]> )
	sysmessage Selecione o destino para <argo.baseid>
	targetfg cpz 2,<argo>
else
	sysmessage Selecione o item a copiar
	targetf cpz 1
endif

//*****************************************************************************
//*****************************************************************************
// EVENTs
//*****************************************************************************
//*****************************************************************************
[EVENTS e_construct]

ON=@ITEMCLICK
	act.message P:<act.p> H:<act.height>
	act.message ID:<act.baseid>
	return 1
[EOF]